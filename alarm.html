<?php
	session_start();
	if(!isset($_SESSION['flag'])) echo "<script>location.href='index.html'</script>";
	include 'server/dbconnect.php';
?>
    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Kostay</title>
        <meta name="keywords" content="Download, Apartment, Premium, Real Estate, HMTL, Site Template, property, mortgage, CSS" />
        <meta name="description" content="Download Apartment - Premium Real Estate HMTL Site Template" />
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
        <link rel="icon" href="favicon.ico" type="image/x-icon">

        <!-- Bootstrap -->
        <link rel="stylesheet" href="bootstrap/bootstrap.min.css">
        <!-- Font awesome styles -->
        <link rel="stylesheet" href="apartment-font/css/font-awesome.min.css">
        <!-- Custom styles -->
        <link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Roboto:400,400italic,300,300italic,500,500italic,700,700italic&amp;subset=latin,latin-ext'>
        <link rel="stylesheet" type="text/css" href="css/plugins.css">
        <link rel="stylesheet" type="text/css" href="css/apartment-layout.css">
        <link rel="stylesheet" type="text/css" href="css/custom.css">
        <link id="skin" rel="stylesheet" type="text/css" href="css/apartment-colors-blue.css">

        <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAxwBuJWDjuX_iABj5vaPO5ljMD_nGflB4&amp;libraries=places"></script>


        <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <style media="screen">
            .margin-top-30 {
                margin-top: 30px;
            }

            .margin-top-60 {
                margin-top: 60px;
            }

            .no-padding {
                padding: 0px;
            }

            .no-padding-left {
                padding-left: 0px;
            }

            .no-padding-right {
                padding-right: 0px;
            }

            .no-margin {
                margin: 0px;
            }

            .width-100 {
                width: 100%
            }

            tr,
            td,
            th {
                font-size: 1em;
                text-align: center;
                height: 60px;
            }

            .modal-media {
                width: 60% !important;
            }

            @media (max-width: 600px) {
                .modal-media {
                    width: 100% !important;
                    margin: auto;
                }
            }

            .col-xs-12 {
                padding: 0px;
            }
        </style>
    </head>

    <body>
        <div class="loader-bg"></div>
        <div id="wrapper">

            <!-- Page header -->
            <header>
                <!-- /.Page top-bar-wrapper -->

                <?include("config/mypage_navbar.html");?>
            </header>


            <section class="section-light section-top-shadow">
                <div class="container">
                    <div class="row">

                        <div class="col-xs-12 col-md-12">
														<style>
														.alarm-content{
															font-family: "NanumGothic", sans-serif !important;
															font-size: 2.5vh !important;
														}
														.alarm-title{
															font-family: "NanumGothic", sans-serif !important;
															font-size: 3.5vh !important;
															font-weight: bold !important;
															margin-bottom: 30px !important;
														}
														</style>
                            <div class="row">
                              <div class="col-xs-12 alarm-info-container">
                                <img src="images/naro_c_basic.png" class="img-responsive" width="200" height="200" />
																<p></p>
                                <p class="alarm-title">쉐어하우스를 찾는 스마트한 방법</p>
                                <p class="alarm-content">알림 설정하세요!</p>
																<p class="alarm-content">원하는 집이 나오면 바로 알려드립니다.</p>
                              </div>
                            </div>

                            <div class="row margin-top-60">
                                <h3>조건 설정</h3>
                                <div class="title-separator-primary" style="margin-bottom:20px;"></div>
                            </div>

                            <div class="row">
                                <div class="col-xs-12 col-md-4 col-sm-4 col-lg-4">
                                  <input name="name" id="name" type="text" class="bootstrap-select address2 input-short2 main-input required,all" placeholder="지역">
                                </div>

                                <div class="col-xs-12 col-md-4 col-sm-4 col-lg-4">
                                  <select name="country1" id="gender2" class="bootstrap-select gender2" title="성별:">
                                    <option value="1">남성 전용</option>
                                    <option value="2">여성 전용</option>
                                    <option value="3">혼성 전용</option>
                                    <option value="4">커플 전용</option>
                                  </select>
                                </div>

                                <div class="col-xs-12 col-md-4 col-sm-4 col-lg-4">
                                  <select name="city1" id="type2" class="bootstrap-select type2" title="룸타입:">
                                    <option value="1">1인실</option>
                                    <option value="2">2인실</option>
                                    <option value="3">3인실</option>
                                    <option value="4">4인실</option>
                                  </select>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xs-12 col-md-7 col-sm-7 col-lg-7"></div>

																<div class="col-xs-12 col-md-5 col-sm-5 col-lg-5" style="text-align:right;">
                                    <a href="#" class="button-alternative button-shadow alarm-save2">
                                        <span>간편 조건등록</span>
                                        <div class="button-triangle"></div>
                                        <div class="button-triangle2"></div>
                                        <div class="button-icon"><i class="jfont fa-lg">&#xe804;</i></div>
                                    </a>
																		<a href="#detail-alarm-modal" class="button-secondary button-shadow btn-add-alarm-detail" data-toggle="modal">
                                        <span>상세 조건입력</span>
                                        <div class="button-triangle"></div>
                                        <div class="button-triangle2"></div>
                                        <div class="button-icon"><i class="jfont fa-lg">&#xe804;</i></div>
                                    </a>
                                </div>
                            </div>

                            <div class="row margin-top-60">
                                <h3>조건 설정 결과 보기</h3>
                                <div class="title-separator-primary" style="margin-bottom:20px;"></div>
                            </div>
														<style>
															.panel-table .panel-body{
																padding:0;
															}
															.panel-table .panel-body .table-bordered{
																border-style: none;
																margin:0;
															}

															.panel-table .panel-body .table-bordered > thead > tr > th:first-of-type {
																text-align:center;
															  width: 100px;
															}

															.panel-table .panel-body .table-bordered > thead > tr > th:last-of-type,
															.panel-table .panel-body .table-bordered > tbody > tr > td:last-of-type {
																border-right: 0px;
																font-size: 2.0vh;
															}

															.panel-table .panel-body .table-bordered > thead > tr > th:first-of-type,
															.panel-table .panel-body .table-bordered > tbody > tr > td:first-of-type {
																border-left: 0px;
															}

															.panel-table .panel-body .table-bordered > tbody > tr:first-of-type > td{
																border-bottom: 0px;
															}

															.panel-table .panel-body .table-bordered > thead > tr:first-of-type > th{
															  border-top: 0px;
																padding-bottom: 15px;
																font-size: 2.5vh;
															}

															.panel-table .panel-footer .col{
																line-height: 34px;
																height: 34px;
															}

															.panel-table .panel-heading .col h3{
																line-height: 30px;
																height: 30px;
															}

															.panel-table .panel-body .table-bordered > tbody > tr > td{
																line-height: 34px;
															}

															.btn.active {
																display: none;
															}

														</style>

														<?
					                    $query = "select * from alarm where user_id ='".$_SESSION['id']."'";
					                    $result = mysqli_query($conn, $query);
															if(!isset($result)){
														?>

														<!-- 기존 조건 설정에 부합하는  결과가 없을 경우-->
                            <div class="row margin-top-60">
															<div class="row">
																<div class="col-md-12">
																	<div class="panel panel-default panel-table">

																		<div class="panel-body">
																			<table class="table table-striped table-bordered table-list">
																				<thead>
																					<tr>
																							<th>등록된 알림이 없습니다.</th>
																					</tr>
																				</thead>
																			</table>
																		</div>
																	</div>
																</div>
															</div>
                            </div>
                            <!-- .기존 조건 설정에 부합하는  결과가 없을 경우-->
														<?
															}
															else{
														?>

														<div class="row">
															<div class="col-md-12">
																<div class="panel panel-default panel-table">

																	<div class="panel-body">
																		<table class="table table-striped table-bordered table-list">
																			<thead>
																				<tr>
																						<th><i class="fa fa-cog"></i></th>
																						<th>알림 설정</th>
																						<th>알림 제목</th>
																				</tr>
																			</thead>
					                            <?
										                    while($row = mysqli_fetch_array($result)){
					                						?>

                            <!-- 기존 조건 설정에 부합하는  결과가 있을 경우-->
									                  	<tbody>
																				<tr>
																					<td align="center">
																						<a class="btn btn-default" onclick="javascript:<?if($row['alarm_title']=='간편알림'){echo 'get_alarm2(this)';} else{echo 'get_alarm(this)';}?>;" value="<?=$row['alarm_id']?>" title="수정">
																							<i class="fa fa-pencil"></i>
																						</a>
																						<a class="btn btn-danger" onclick="javascript:delete_alarm(this);" value="<?=$row['alarm_id']?>" title="삭제">
																							<i class="fa fa-trash"></i>
																						</a>
																					</td>
																					<td>
																						<div class="" data-toggle="buttons">
																							<label class="btn btn-lg btn-success <?if($row['cont']==0){echo 'active';}?>" style="width:61px;height:35px; padding:5px 5px" onclick="updateCon(this)" name="<?=$row['alarm_id']?>">
																								<input type="radio" name="options" id="option1" autocomplete="on">
																		            <i class="fa fa-check"></i>ON
																		          </label>
																		          <label class="btn btn-lg btn-danger <?if($row['cont']==1){echo 'active';}?>" style="height:35px; padding:5px 5px" onclick="updateCon(this)" name="<?=$row['alarm_id']?>">
																		            <input type="radio" name="options" id="option2" autocomplete="off">
																		            <i class="fa fa-warning"></i>OFF
																		          </label>
																		        </div>
																					</td>
																					
																					<?
																					$alarmQuery = "select * from alarm where alarm_id='".$row['alarm_id']."'";
                                                                                    $alarmResult= mysqli_query($conn, $alarmQuery);
                                                                                    $alarmRow = mysqli_fetch_array($alarmResult);
                                                                                     $query_house = array();
                                                                                    $query_room = array();

                                                                                      if($alarmRow['gender']!=null) array_push($query_house, " `gender` = '".$alarmRow['gender']."' ");

                                                                                      if($alarmRow['house_type']!=null){
                                                                                        if($alarmRow['house_type']==0){
                                                                                          array_push($query_house, " (`house_type`  = '1' or `house_type` = '2')");
                                                                                        }
                                                                                        else if($alarmRow['house_type']) array_push($query_house, " `house_type` = '1'");
                                                                                        else if($alarmRow['house_type']) array_push($query_house, " `house_type` = '2'");
                                                                                      }

                                                                                      if($alarmRow['type']!=null){
                                                                                        if($alarmRow['type']==4){
                                                                                            array_push($query_house, " `type` like '%4%'");
                                                                                        }
                                                                                        else if($alarmRow['type']==1) array_push($query_house, " `type` like '%1%'");
                                                                                        else if($alarmRow['type']==2) array_push($query_house, " `type` like '%2%'");
                                                                                        else if($alarmRow['type']==3) array_push($query_house, " `type` like '%3%'");
                                                                                      }

                                                                                    if($alarmRow['min_rent']!=null){
                                                                                        $low=$alarmRow['min_rent'];
                                                                                        $high=$alarmRow['max_rent'];
                                                                                        array_push($query_house, " (`min_rent` >= ".$low." and `max_rent` <= ".$high.")");
                                                                                    }


                                                                                      if($alarmRow['park']!=null){
                                                                                        if($alarmRow['park']=="0"){}
                                                                                        else if($alarmRow['park']=="1") array_push($query_house, " `park` = 1");
                                                                                      }


                                                                                      if($alarmRow['date']!=null){
                                                                                          if($alarmRow['date_condition']==0){}
                                                                                          else if($alarmRow['date_condition']==1) array_push($query_house, " `date` <= '".$alarmRow['date']."'");
                                                                                          else if($alarmRow['date_condition']==2) array_push($query_house, " `date` >= '".$alarmRow['date']."'");  
                                                                                      }


                                                                                      if($alarmRow['person']!=null) {
                                                                                        if($alarmRow['person']==0){
                                                                                        }
                                                                                        elseif($alarmRow['person']==4){
                                                                                          array_push($query_room, " `person` >= ".$alarmRow['person']." ");
                                                                                        }
                                                                                        else{
                                                                                          array_push($query_room, " `person` = ".$alarmRow['person']." ");
                                                                                        }
                                                                                      }


                                                                                    array_push($query_house, " ad='1'");


                                                                                    $origin="";
                                                                                    $origin_condition="";

                                                                                    if(($alarmRow['alarm_param']!=null || $alarmRow['alarm_loc']!=null)){
                                                                                      if($alarmRow['alarm_loc']==1){
                                                                                        $origin = $alarmRow['address'];
                                                                                        $origin_condition = $alarmRow['alarm_param'];
                                                                                      }
                                                                                      else if($alarmRow['alarm_loc']==2){
                                                                                        $origin = $alarmRow['address'];
                                                                                        $origin_condition = 8;
                                                                                      }
                                                                                      else if($alarmRow['alarm_loc']==3){
                                                                                        $origin = $alarmRow['address'];
                                                                                        $origin_condition = $alarmRow['alarm_param'] * 5;
                                                                                      }
                                                                                    }

                                                                                    $query2 = "select house_id from search ";
                                                                                    $query_count = "select count(*) from search";
                                                                                    for($i=0; $i<count($query_house);++$i){
                                                                                      if($i==0) {
                                                                                        $query2 .= " where ";
                                                                                        $query_count .= " where ";
                                                                                      }
                                                                                      else{
                                                                                        $query2 .= " and ";
                                                                                        $query_count .= " and ";
                                                                                      }
                                                                                      $query2 .= $query_house[$i];
                                                                                      $query_count .= $query_house[$i];
                                                                                    }

                                                                                    $query2 .=  " order by register_time DESC";
                                                                                    $query_count .=  " order by register_time DESC";

                                                                                    $result2 = mysqli_query($conn, $query2);
                                                                                    $result_count = mysqli_query($conn, $query_count); 
																					
																					
																					$index=0;
                                                                                    while($row2=mysqli_fetch_array($result2)){
                                                                                      $query_second = "select * from search";
                                                                                      $second_result = mysqli_query($conn, $query_second);
                                                                                      $second_row=mysqli_fetch_array($second_result);
                                                                                    ?>
                                                                                    <script type="text/javascript">
                                                                                      var geocoder;
                                                                                      var origin;
                                                                                      var latlng;
                                                                                        var search_id;

                                                                                      geocoder =  new google.maps.Geocoder();
                                                                                      geocoder.geocode({'address':'<?=$origin?>'}, function(results, status) {

                                                                                              if (status == google.maps.GeocoderStatus.OK)
                                                                                              {
                                                                                                for(var i=0;i<results.length;i++)
                                                                                                {
                                                                                                  origin = new google.maps.LatLng(results[i].geometry.location.lat(), results[i].geometry.location.lng());
                                                                                                  var destination = "<?= $second_row['address'] ?>";
                                                                                                  var service = new google.maps.DistanceMatrixService();
                                                                                                  service.getDistanceMatrix(
                                                                                                  {
                                                                                                      origins: [origin],
                                                                                                      destinations: [destination],
                                                                                                      travelMode: google.maps.TravelMode.DRIVING,
                                                                                                      unitSystem: google.maps.UnitSystem.METRIC,
                                                                                                      avoidHighways: false,
                                                                                                      avoidTolls: false
                                                                                                  },
                                                                                                      callback
                                                                                                  );
                                                                                                }
                                                                                              }
                                                                                              else{
                                                                                                //alert("Geocode was not successful for the following reason: " + status);
                                                                                              }
                                                                                          });

                                                                                          //var origin = new google.maps.LatLng(55.930385, -3.118425),
                                                                                          //var origin = new google.maps.LatLng(37.335887, 126.584063),
                                                                                          function callback(response, status) {
                                                                                            /*
                                                                                            var orig = document.getElementById("orig"),
                                                                                                dest = document.getElementById("dest"),
                                                                                                dist = document.getElementById("dist");
                                                                                            */

                                                                                            if(status=="OK"){
                                                                                              /*
                                                                                              dest.value = response.destinationAddresses[0];
                                                                                              orig.value = response.originAddresses[0];
                                                                                              */
                                                                                              //dist.value = response.rows[0].elements[0].distance.text;
                                                                                                try{
                                                                                                    var distance = response.rows[0].elements[0].distance.text.split('');      
                                                                                                }catch(exception){
                                                                                                    var distance = 1000;
                                                                                                }

                                                                                              var origin_condition = "<?=$origin_condition?>";

                                                                                              if("<?=$_SESSION['id']?>" == null){
                                                                                                search_id = 'guest';
                                                                                              }
                                                                                              else{
                                                                                                search_id = "<?=$_SESSION['id']?>";
                                                                                              }

                                                                                              if(origin_condition >= distance[0]){
                                                                                                //alert("<?=$second_row['address']?>");
                                                                                                $.ajax({
                                                                                                  url:"server/search_result.php",
                                                                                                  type:"POST",
                                                                                                  data:{
                                                                                                    house_id:"<?=$row2['house_id']?>",search_id:search_id,limit:"<?=$origin_condition?>", distance : distance[0],condition:"add"
                                                                                                  },
                                                                                                  success: function(data){
                                                                                                  },
                                                                                                  error: function(){
                                                                                                  }
                                                                                                });
                                                                                              }
                                                                                            } else {
                                                                                              //alert("ERROR");
                                                                                              //alert("Error: " + status);
                                                                                            }
                                                                                          }
                                                                                          </script>
                                                                                          <?
                                                                                        }
                                                                                      ?>


                                                                                    <?
                                                                                        if($_SESSION['id']==null) $search_id="guest";
                                                                                        else $search_id = $_SESSION['id'];
                                                                                        $final_count_query = "select count(*) from search_result where username='".$search_id."'";
                                                                                        $final_count_result = mysqli_query($conn, $final_count_query);
                                                                                        $final_count_row = mysqli_fetch_array($final_count_result);
                                                                                    ?>
																					
																					<td><a href="alarm_detail.html?alarm=<?=$row['alarm_id']?>" style="text-decoration:none;cursor:pointer"><?=$row['alarm_title']?>(<?=$final_count_row[0]?>)</a></td>
																				</tr>
																				<?
                                                                                  
                                                                                ?>
																				<script>
                                                                                    function updateCon(param){
                                                                                        $.ajax({
                                                                                          url:"server/alarm.php",
                                                                                          type:"POST",
                                                                                          data:{
                                                                                            condition : "con",
                                                                                            target:$(param).attr("name"),
                                                                                          },
                                                                                          success: function(data){
                                                                                                $(".loader-bg").fadeIn(200).fadeOut(200);
                                                                                            },
                                                                                          error: function(){
                                                                                            swal("에러 발생!","잠시후 다시 시도해 주세요.","error");
                                                                                          }
                                                                                        });
                                                                                    }
                                                                                </script>
																			</tbody>
																			<?
																					}
																				}
																			?>
																		</table>
																	</div>
																 </div>
															 </div>
														 </div>

                              <!-- .기존 조건 설정에 부합하는  결과가 있을 경우-->
                              <div class="row margin-top-60"></div>
                        </div>
                    </div>
                </div>
            </section>
            <script>
                function delete_alarm(param) {
                    var form_data = new FormData();
                    form_data.append("condition", "delete");
                    form_data.append("alarm_id", $(param).attr("value"));
                    $.ajax({
                        url: "server/alarm.php",
                        type: "POST",
                        processData: false, // file전송시 필수
                        contentType: false, // file전송시 필수
                        data: form_data,
                        success: function (data) {
                            swal({
                                    title: "삭제 성공",
                                    text: "알람을 성공적으로 삭제하였습니다.",
                                    type: "success",
                                    showCancelButton: false,
                                    confirmButtonColor: "#DD6B55",
                                    confirmButtonText: "확인",
                                    closeOnConfirm: false
                                },
                                function () {
                                    location.href = "alarm.html";
                                });
                        },
                        error: function () {
                            swal("에러 발생!", "잠시후 다시 시도해 주세요.", "error");
                        }
                    });
                }


            </script>

            <!--small footer-->
            <?include("config/footer.html")?>
        </div>

        <!-- Move to top button -->

        <div class="move-top">
            <div class="big-triangle-second-color"></div>
            <div class="big-icon-second-color"><i class="jfont fa-lg">&#xe803;</i></div>
        </div>

        <!-- detail alarm modal -->
        <div class="modal fade apartment-modal" id="detail-alarm-modal">
            <div class="modal-dialog modal-media" style="margin-top:10px; top:0;">
                <div class="modal-content">
                    <div class="modal-body">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>

                        <div class="modal-title">
                            <span class="special-color"><h3>알람조건 상세입력</h3></span>
                            <div class="short-title-separator"></div>
                        </div>

                        <div class="form-group">
                            <label class="control-label" for="title">조건 제목</label>
                            <div>
                                <input id="alarm-title" name="giftID" type="text" placeholder="조건 제목을 입력하세요." class="form-control input-md alarm_title">
                            </div>
                        </div>
                        <div class="col-xs-12">
                            <div class="col-sm-12 col-md-3">
                                <p>위치기준</p>
                            </div>
                            <div class="col-sm-12 col-md-2">
                                <select id="alarm-km" name="store" class="alarm_loc">
                                    <option value="1">지역기준</option>
                                    <option value="2">시티레일기준</option>
                                    <option value="3">출퇴근기준</option>
                                </select>
                            </div>
                            <div class="col-sm-12 col-md-2 loc-con">
                               <div class="col-xs-8" style="padding:0px">
                                   <input id="alarm-state" name="giftID" type="text" placeholder="지역입력" class="alarm-1-1 address col-xs-9">       
                               </div>
                                <span class="col-xs-4 loc-txt" style="padding:0px">에서</span>
                            </div>
                            <div class="col-sm-12 col-md-2 param_con">
                              <span class="col-xs-4" style="padding:0px">반경</span>
                               <div  class="col-xs-8" style="padding:0px">
                                   <select id="alarm-km" name="store" class="alarm_param">
                                    <option value="1">1Km</option>
                                    <option value="2">2Km</option>
                                    <option value="3">3Km</option>
                                    <option value="4">4Km</option>
                                    <option value="5">5Km</option>
                                </select>
                               </div>
                            </div>
                            <div class="state_input alarm-1  col-sm-12 col-md-2 rail-con">
                                <select id="alarm-km" name="store" class="form-control alarm-1-2 alarm-rail">
                                    <?
                                        $railQuery = "select * from station order by name ASC;";
                                        $railResult = mysqli_query($conn, $railQuery);
                                        while($railRow = mysqli_fetch_array($railResult)){
                                            echo "<option>".$railRow['name']."</option>";
                                        }
                                    ?>
                                </select>
                            </div>
                            <div class="col-sm-12 col-md-2 time-con" style="padding-left:0px">
                              <span class="col-xs-6" style="padding:0px">대중교통으로</span>
                               <div   class="col-xs-6" style="padding:0px">
                                   <select id="alarm-time" name="store" class="form-control  alarm_min">
                                    <option value="1">10분</option>
                                    <option value="2">20분</option>
                                    <option value="3">30분</option>
                                    <option value="4">40분</option>
                                    <option value="5">50분</option>
                                    <option value="6">60분</option>
                                  </select>
                               </div>
                            </div>
                            <div class="col-sm-12 col-md-2">
                                <p class="alarm-text">이내의 집</p>
                            </div>
                            <script>
                                $(".rail-con").hide();
                                $(".time-con").hide()
                                $(".alarm_loc").on("change",function(){
                                    $(".loc-con").hide();
                                    $(".param-con").hide();
                                    $(".rail-con").hide();
                                    $(".time-con").hide();
                                    $(".param_con").hide();
                                   if($(".alarm_loc").val()==3){
                                       $(".loc-con").show();
                                       $(".time-con").show();
                                    $(".alarm-text").text("이내에 도착하는 집");
                                       $(".loc-txt").text("까지");
                                       
                                   }
                                   else if($(".alarm_loc").val()==2){
                                       $(".rail-con").show();
                                     $(".alarm-text").text("역세권에 있는 집");  
                                   } 
                                    else if($(".alarm_loc").val()==1){
                                        $(".loc-con").show();
                                        $(".param_con").show();
                                        $(".alarm-text").text("이내의 집");  
                                        $(".loc-txt").text("에서");
                                    }
                                });
                            </script>
                        </div>
                        <div class="col-xs-12">
                            <div class="col-sm-12 col-md-3">
                                <p>성별</p>
                            </div>
                            <div class="col-sm-12 col-md-9">
                                <div class="radio lg-radio gender">
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="gender-radio" id="alarm-gender-radio1" value="gender-option1" checked="">
                                        <label for="alarm-gender-radio1" class="g1">남성 전용</label>
                                    </div>
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="gender-radio" id="alarm-gender-radio2" value="gender-option2">
                                        <label for="alarm-gender-radio2" class="g2">여성 전용</label>
                                    </div>
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="gender-radio" id="alarm-gender-radio3" value="gender-option3">
                                        <label for="alarm-gender-radio3" class="g3">혼성</label>
                                    </div>
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="gender-radio" id="alarm-gender-radio4" value="gender-option4">
                                        <label for="alarm-gender-radio4" class="g4">커플 전용</label>
                                    </div>
                                </div>
                            </div>
                            <script>
                                $(".gender").val("1");
                                $(".g1").on("click", function () {
                                    $(".gender").val("1");
                                });
                                $(".g2").on("click", function () {
                                    $(".gender").val("2");
                                });
                                $(".g3").on("click", function () {
                                    $(".gender").val("3");
                                });
                                $(".g4").on("click", function () {
                                    $(".gender").val("4");
                                });
                            </script>
                        </div>

                        <div class="col-xs-12">
                            <div class="col-sm-12 col-md-3">
                                <p>주택유형</p>
                            </div>
                            <div class="col-sm-12 col-md-9">
                                <div class="radio lg-radio house_type">
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="house-radio" id="alarm-house-radio1" value="house-option1" checked="">
                                        <label for="alarm-house-radio1" class="t1">무관</label>
                                    </div>
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="house-radio" id="alarm-house-radio2" value="house-option2">
                                        <label for="alarm-house-radio2" class="t2">단독주택</label>
                                    </div>
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="house-radio" id="alarm-house-radio3" value="house-option3">
                                        <label for="alarm-house-radio3" class="g3">공동주택</label>
                                    </div>
                                </div>
                            </div>
                            <script>
                                $(".house_type").val("0");
                                $(".t1").on("click", function () {
                                    $(".house_type").val("0");
                                });
                                $(".t2").on("click", function () {
                                    $(".house_type").val("2");
                                });
                                $(".t3").on("click", function () {
                                    $(".house_type").val("1");
                                });
                            </script>
                        </div>

                        <div class="col-xs-12">
                            <div class="col-sm-12 col-md-3">
                                <p>룸타입</p>
                            </div>
                            <div class="col-sm-12 col-md-9">
                                <div class="radio sm-radio type">
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="room-radio" id="alarm-room-radio2" value="room-option2"  checked>
                                        <label for="alarm-room-radio2" class="type2">1인실</label>
                                    </div>
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="room-radio" id="alarm-room-radio3" value="room-option3">
                                        <label for="alarm-room-radio3" class="type3">2인실</label>
                                    </div>
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="room-radio" id="alarm-room-radio4" value="room-option4">
                                        <label for="alarm-room-radio4" class="type4">3인실</label>
                                    </div>
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="room-radio" id="alarm-room-radio5" value="room-option5">
                                        <label for="alarm-room-radio5" class="type5">4인이상</label>
                                    </div>

                                </div>
                            </div>
                            <script>
                                $(".type").val("1");
                                $(".type2").on("click", function () {
                                    $(".type").val("1");
                                });
                                $(".type3").on("click", function () {
                                    $(".type").val("2");
                                });
                                $(".type4").on("click", function () {
                                    $(".type").val("3");
                                });
                                $(".type5").on("click", function () {
                                    $(".type").val("4");
                                });
                            </script>
                        </div>

                        <div class="col-xs-12">
                            <div class="col-sm-12 col-md-3">
                                <p>렌트비(주당)</p>
                            </div>
                            <div class="col-sm-12 col-md-2">
                                <input id="alarm-rent-min" name="giftID" type="text" placeholder="최소 렌트비입력" class="form-control min-rent">
                            </div>
                            <div class="col-sm-12 col-md-1" style="padding-left:0px">
                                에서
                            </div>
                            <div class="col-sm-12 col-md-2">
                                <input id="alarm-rent-max" name="giftID" type="text" placeholder="최대 렌트비입력" class="form-control max-rent">
                            </div>
                            <div class="col-sm-12 col-md-2" style="padding-left:0px">
                                <div class="info" style="text-align:center;padding-left:0px">
                                    (AUD)
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-12">
                            <div class="col-sm-12 col-md-3">
                                <p>주차</p>
                            </div>
                            <div class="col-sm-12 col-md-9">
                                <div class="radio lg-radio park">
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="parking-radio" id="alarm-parking-radio1" value="parking-option1" checked="">
                                        <label for="alarm-parking-radio1" class="p1">무관</label>
                                    </div>
                                    <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="parking-radio" id="alarm-parking-radio2" value="parking-option2">
                                        <label for="alarm-parking-radio2" class="p2">가능</label>
                                    </div>
                                </div>
                            </div>
                            <script>
                                $(".park").val("0");
                                $(".p1").on("click", function () {
                                    $(".park").val("0");
                                });
                                $(".p2").on("click", function () {
                                    $(".park").val("1");
                                });
                            </script>
                        </div>

                        <div class="col-xs-12">
                            <div class="col-sm-12 col-md-3">
                                <p>입주일</p>
                            </div>
                            <div class="col-sm-12 col-md-9">
                                <div class="radio lg-radio date_condition" style="    position: relative;top: -30px;">
                                   <div style="display:inline-block;width:80px;">
                                        <input type="radio" name="date-radio" id="alarm-date-radio4" value="date-option4" checked>
                                        <label for="alarm-date-radio4" class="c1">무관</label>
                                    </div>
                                    <div style="display:inline-block;width:120px;">
                                        <input type="radio" name="date-radio" id="alarm-date-radio3" value="date-option3" style="display:inline">
                                        <input type="date" id="alarm-regyear" class="floatLabel date" name="regyear" style="display:inline;position:relative;top:19px" value="<?php echo date('Y-m-d'); ?>">
                                        <label class="c3"></label>
                                    </div>
                                    <span>이후</span>
                                </div>
                            </div>
                            <script>
                            $(".date_condition").val("무관");
                            $(".c1").on("click", function () {
                                $(".date_condition").val("무관");
                            });
                            $(".c3").on("click", function () {
                                $(".date_condition").val("이후");
                            });
                        </script>
                        </div>

                        <div class="form-group">
                            <label class="control-label" for="title">이메일</label>
                            <div>
                                <input id="alarm-email" name="giftID" type="text" placeholder="알림을 받으실 이메일을 입력하세요." class="form-control input-md contact">
                            </div>
                        </div>

                        <!--
                        <div class="modal-title">
                            <span class="special-color"><h3>알림 기준</h3></span>
                            <div class="short-title-separator"></div>
                        </div>

                        <div class="col-xs-12">
                            <label class="control-label" for="title">조건 제목</label>
                            <div>
                                <input id="alarm-title" name="giftID" type="text" placeholder="조건 제목을 입력하세요." class="form-control input-md alarm_title">
                            </div>
                        </div>

                        <div class="col-xs-12">

                        </div>

                        <div class="form-group">
                            <label class="control-label" for="title">조건 제목</label>
                            <div>
                                <input id="alarm-title" name="giftID" type="text" placeholder="조건 제목을 입력하세요." class="form-control input-md alarm_title">
                            </div>
                        </div>

                        <div class="form-position-input-row-border">
                            <div class="form-position-input-title col-sm-12 col-md-4">
                                위치기준
                            </div>
                            <div class="state_input  col-sm-12 col-md-2">
                                <select id="alarm-km" name="store" class="form-control alarm-condition alarm_loc">
                                    <option value="1">지역기준</option>
                                    <option value="2">시티레일 기준</option>
                                    <option value="3">출퇴근 기준</option>
                                </select>
                            </div>
                            <div class="state_input alarm-1  col-sm-12 col-md-2">
                                <input id="alarm-state" name="giftID" type="text" placeholder="지역입력" class="form-control alarm-1-1 address">
                                <select id="alarm-km" name="store" class="form-control alarm-1-2">
                                    <?
                                        $railQuery = "select * from station order by name ASC;";
                                        $railResult = mysqli_query($conn, $railQuery);
                                        while($railRow = mysqli_fetch_array($railResult)){
                                            echo "<option>".$railRow['name']."</option>";
                                        }
                                    ?>
                                </select>
                            </div>
                            <div class="state_input alarm-2  col-sm-12 col-md-2">
                                <select id="alarm-km" name="store" class="form-control  alarm_param">
                                    <option value="1Km">1Km</option>
                                    <option value="2Km">2Km</option>
                                    <option value="3Km">3Km</option>
                                    <option value="4Km">4Km</option>
                                    <option value="5Km">5Km</option>
                                </select>
                            </div>
                            <div class="info alarm-3  col-sm-12 col-md-2">
                                근처의 집
                            </div>
                        </div>

                        <script>
                            $(".alarm-1-2").hide();
                            $(".alarm-condition").on("change", function () {
                                if ($(".alarm-condition").val() == 1) {
                                    var t1 = '<input id="alarm-state" name="giftID" type="text" placeholder="지역입력" class="form-control">';
                                    var t2 = '<select id="alarm-km" name="store" class="form-control">\
                                  <option value="1Km">1Km</option>\
                                  <option value="2Km">2Km</option>\
                                  <option value="3Km">3Km</option>\
                                  <option value="4Km">4Km</option>\
                                  <option value="5Km">5Km</option>\
						        </select>';
                                    $(".alarm-3").text("근처의 집");
                                    $(".alarm-1").html(t1);
                                    $(".alarm-2").html(t2);
                                    $(".alarm-1-2").hide();
                                    $(".alarm-1-1").show();
                                } else if ($(".alarm-condition").val() == 2) {
                                    $(".alarm-3").text("근처의 집");
                                    $(".alarm-1").html(t1);
                                    $(".alarm-2").html("&nbsp;");
                                    $(".alarm-1-1").hide();
                                    $(".alarm-1-2").show();
                                } else {
                                    var t1 = '<input id="alarm-state" name="giftID" type="text" placeholder="지역입력" class="form-control">';
                                    var t2 = '<select id="alarm-time" name="store" class="form-control  alarm_param">\
                                        <option value="10분">10분</option>\
                                        <option value="20분">20분</option>\
                                        <option value="30분">30분</option>\
                                        <option value="40분">40분</option>\
                                        <option value="50분">50분</option>\
                                        <option value="60분">60분</option>\
						              </select>';
                                    $(".alarm-3").text("이내로 도착");
                                    $(".alarm-1").html(t1);
                                    $(".alarm-2").html(t2);
                                    $(".alarm-1-2").hide();
                                    $(".alarm-1-1").show();
                                }
                            });
                        </script>


                        <div class="form-position-input-row-border row">
                            <div class="alarm-title col-sm-12 col-md-3" st>
                                성별
                            </div>
                            <div class="gender-input col-sm-12 col-md-9">
                                <div class="radio lg-radio gender">
                                    <input type="radio" name="gender-radio" id="alarm-gender-radio1" value="gender-option1" checked="">
                                    <label for="alarm-gender-radio1" class="g1">무관</label>
                                    <input type="radio" name="gender-radio" id="alarm-gender-radio2" value="gender-option2">
                                    <label for="alarm-gender-radio2" class="g2">남성 전용</label>
                                    <input type="radio" name="gender-radio" id="alarm-gender-radio3" value="gender-option3">
                                    <label for="alarm-gender-radio3" class="g3">여성 전용</label>
                                    <input type="radio" name="gender-radio" id="alarm-gender-radio4" value="gender-option4">
                                    <label for="alarm-gender-radio4" class="g4">커플</label>
                                </div>
                            </div>
                            <script>
                                $(".gender").val("무관");
                                $(".g1").on("click", function () {
                                    $(".gender").val("무관");
                                });
                                $(".g2").on("click", function () {
                                    $(".gender").val("남성");
                                });
                                $(".g3").on("click", function () {
                                    $(".gender").val("여성");
                                });
                                $(".g4").on("click", function () {
                                    $(".gender").val("커플");
                                });
                            </script>
                        </div>

                        <div class="form-position-input-row-border">
                            <div class="form-position-input-title">
                                주택유형
                            </div>
                            <div class="gender-input house_type">
                                <div class="radio lg-radio">
                                    <input type="radio" name="house-radio" id="alarm-house-radio1" value="house-option1" checked="">
                                    <label for="alarm-house-radio1" class="t1">무관</label>
                                    <input type="radio" name="house-radio" id="alarm-house-radio2" value="house-option2">
                                    <label for="alarm-house-radio2" class="t2">단독주택</label>
                                    <input type="radio" name="house-radio" id="alarm-house-radio3" value="house-option3">
                                    <label for="alarm-house-radio3" class="t3">공동주택</label>
                                </div>
                            </div>
                            <script>
                                $(".house_type").val("무관");
                                $(".t1").on("click", function () {
                                    $(".house_type").val("무관");
                                });
                                $(".t2").on("click", function () {
                                    $(".house_type").val("단독주택");
                                });
                                $(".t3").on("click", function () {
                                    $(".house_type").val("공동주택");
                                });
                            </script>
                        </div>

                        <div class="form-position-input-row-border">
                            <div class="form-position-input-title">
                                룸타입
                            </div>
                            <div class="gender-input type">
                                <div class="radio sm-radio type">
                                    <input type="radio" name="room-radio" id="alarm-room-radio1" value="room-option1" checked="">
                                    <label for="alarm-room-radio1" class="type1">무관</label>
                                    <input type="radio" name="room-radio" id="alarm-room-radio2" value="room-option2">
                                    <label for="alarm-room-radio2" class="type2">1인실</label>
                                    <input type="radio" name="room-radio" id="alarm-room-radio3" value="room-option3">
                                    <label for="alarm-room-radio3" class="type3">2인실</label>
                                    <input type="radio" name="room-radio" id="alarm-room-radio4" value="room-option4">
                                    <label for="alarm-room-radio4" class="type4">3인실</label>
                                    <input type="radio" name="room-radio" id="alarm-room-radio5" value="room-option5">
                                    <label for="alarm-room-radio5" class="type5">4인이상</label>
                                </div>
                            </div>
                            <script>
                                $(".type").val("무관");
                                $(".type1").on("click", function () {
                                    $(".type").val("무관");
                                });
                                $(".type2").on("click", function () {
                                    $(".type").val("1인실");
                                });
                                $(".type3").on("click", function () {
                                    $(".type").val("2인실");
                                });
                                $(".type4").on("click", function () {
                                    $(".type").val("3인실 이상");
                                });
                                $(".type5").on("click", function () {
                                    $(".type").val("4인 이상");
                                });
                            </script>
                        </div>

                        <div class="form-position-input-row-border">
                            <div class="form-position-input-title">
                                렌트비(주당)
                            </div>
                            <div class="rent_input">
                                <input id="alarm-rent-min" name="giftID" type="text" placeholder="최소 렌트비입력" class="form-control min_rent">
                            </div>
                            <div class="info" style="text-align:center;">
                                에서
                            </div>
                            <div class="rent_input">
                                <input id="alarm-rent-max" name="giftID" type="text" placeholder="최대 렌트비입력" class="form-control max_rent">
                            </div>
                            <div class="info">
                                (AUD)
                            </div>
                        </div>

                        <div class="form-position-input-row-border">
                            <div class="form-position-input-title">
                                주차
                            </div>
                            <div class="gender-input">
                                <div class="radio lg-radio park">
                                    <input type="radio" name="parking-radio" id="alarm-parking-radio1" value="parking-option1" checked="">
                                    <label for="alarm-parking-radio1" class="p1">무관</label>
                                    <input type="radio" name="parking-radio" id="alarm-parking-radio2" value="parking-option2">
                                    <label for="alarm-parking-radio2" class="p2">가능</label>
                                </div>
                            </div>
                            <script>
                                $(".park").val("무관");
                                $(".p1").on("click", function () {
                                    $(".park").val("무관");
                                });
                                $(".p2").on("click", function () {
                                    $(".park").val("가능");
                                });
                            </script>

                        </div>

                        <div class="form-position-input-row-noborder">
                            <div class="form-position-input-title">
                                입주일
                            </div>
                            <div class="date-input">
                                <div class="control">
                                    <input type="date" id="alarm-regyear" class="floatLabel date" name="regyear" value="<?php echo date('Y-m-d'); ?>">
                                </div>
                            </div>
                        </div>

                        <div class="form-position-input-row-border">
                            <div class="gender-input" style="float:right;">
                                <div class="radio lg-radio date_condition">
                                    <input type="radio" name="date-radio" id="alarm-date-radio4" value="date-option4" checked="">
                                    <label for="alarm-date-radio4" class="c1">무관</label>
                                    <input type="radio" name="date-radio" id="alarm-date-radio2" value="date-option2">
                                    <label for="alarm-date-radio2" class="c2">이전</label>
                                    <input type="radio" name="date-radio" id="alarm-date-radio3" value="date-option3">
                                    <label for="alarm-date-radio3" class="c3">이후</label>
                                </div>
                            </div>
                        </div>
                        <script>
                            $(".date_condition").val("무관");
                            $(".c1").on("click", function () {
                                $(".date_condition").val("무관");
                            });
                            $(".c2").on("click", function () {
                                $(".date_condition").val("이전");
                            });
                            $(".c3").on("click", function () {
                                $(".date_condition").val("이후");
                            });
                        </script>

                        <div class="form-group">
                            <label class="control-label" for="title">이메일</label>
                            <div>
                                <input id="alarm-email" name="giftID" type="text" placeholder="알림을 받으실 이메일을 입력하세요." class="form-control input-md contact">
                            </div>
                        </div>
-->


                        <a href="#" data-toggle="modal" class="google-button margin-top-15 alarm-save">
                            <i class="fa fa-plus"></i>
                            <span>상세 조건 등록</span>
                        </a>

                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>
        <!-- /.modal -->
        
        <!-- simple modal -->
        <div class="modal fade apartment-modal" id="simple" style="top:10%;" data-keyboard="false">
            <div class="modal-dialog" style="width :900px; height:300px;">
                <div class="modal-content" style="width :900px; height:300px;">
                    <div class="modal-body" style="width :900px; height:300px;">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="javascript:closeModal();">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <div class="row margin-top-60">
                                <h3>간편 조건 설정</h3>
                                <div class="title-separator-primary" style="margin-bottom:20px;"></div>
                            </div>
                            <style>
                            .test{
                                width: 100%;height: 50px;border-color: #eee;font-weight: bold;
                            }
                        </style>
                            <div class="row">
                                <div class="col-xs-12 col-md-4 col-sm-4 col-lg-4">
                                  <input name="name" id="name" type="text" class="bootstrap-select address3 input-short2 main-input required,all" placeholder="지역">
                                </div>

                                <div class="col-xs-12 col-md-4 col-sm-4 col-lg-4">
                                  <select name="country1" id="gender3" class="gender3" title="성별:" style="width: 100%;height: 50px;border-color: #eee;font-weight: bold;">
                                    <option value="1" class="test">남성 전용</option>
                                    <option value="2" class="test">여성 전용</option>
                                    <option value="3" class="test">혼성 전용</option>
                                    <option value="4" class="test">커플 전용</option>
                                  </select>
                                </div>

                                <div class="col-xs-12 col-md-4 col-sm-4 col-lg-4">
                                  <select name="city1" id="type3" class="type3" title="룸타입:" style="width: 100%;height: 50px;border-color: #eee;font-weight: bold;">
                                    <option value="1" class="test">1인실</option>
                                    <option value="2" class="test">2인실</option>
                                    <option value="3" class="test">3인실</option>
                                    <option value="4" class="test">4인실</option>
                                  </select>
                                </div>
                            </div>
                        
                            <a href="#" class="button-alternative button-shadow alarm-save3 pull-right">
                                <span>간편 조건 수정</span>
                                <div class="button-triangle"></div>
                                <div class="button-triangle2"></div>
                                <div class="button-icon"><i class="jfont fa-lg">&#xe804;</i></div>
                            </a>
                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>
        <!-- /.modal -->
        
        
        
        
        
        <script>

            function get_alarm(param) {
                    var form_data = new FormData();
                    form_data.append("condition", "modify");
                    form_data.append("target", $(param).attr("value"));
                    $.ajax({
                        url: "server/alarm.php",
                        type: "POST",
                        processData: false, // file전송시 필수
                        contentType: false, // file전송시 필수
                        data: form_data,
                        success: function (data) {
                            $(".rail-con").hide();
                            $(".time-con").hide()
                            $(".loc-con").hide();
                            $(".param_con").hide();
                            var al = data.split(",");
                            $("#detail-alarm-modal").modal("show");
                            $(".alarm-save").attr("value",al[3]);
                            $(".alarm_loc").val(al[5]);
                            if(al[5]==1){
                                $(".loc-con").show();
                                $(".param_con").show();
                                $(".alarm-text").text("근처의 집");
                            }
                            else if(al[5]==2){
                                $(".rail-con").show();
                                $(".alarm-rail").val(al[7])
                                $(".alarm-text").text("근처의 집");
                            }
                            else if(al[5]==3){
                                $(".loc-con").show();
                                $(".time-con").show();
                                $(".alarm-text").text("이내로 도착");
                            }
                            $(".contact").attr("value",al[17]);
                            $(".date").attr("value",al[15]);
                            $(".min-rent").attr("value",al[11]);
                            $(".max-rent").attr("value",al[12]);
                            $(".alarm_title").attr("value",al[4]);
                            $(".address").attr("value",al[7]);
                        },
                        error: function () {
                            swal("에러 발생!", "잠시후 다시 시도해 주세요.", "error");
                        }
                    });
                }
            
            function get_alarm2(param) {
                    var form_data = new FormData();
                    form_data.append("condition", "modify");
                    form_data.append("target", $(param).attr("value"));
                    $.ajax({
                        url: "server/alarm.php",
                        type: "POST",
                        processData: false, // file전송시 필수
                        contentType: false, // file전송시 필수
                        data: form_data,
                        success: function (data) {
                            var al = data.split(",");
                            $("#simple").modal("show");
                            $(".alarm-save3").attr("value",al[3]);
                            $("#gender3").val(al[8]);
                            $(".type3").val(al[10]);
                            $(".address3").attr("value",al[7]);
                        },
                        error: function () {
                            swal("에러 발생!", "잠시후 다시 시도해 주세요.", "error");
                        }
                    });
                }

            $.ajax({
                url: "server/alarm.php",
                type: "POST",
                data: {
                    condition: "getId"
                },
                success: function (data) {
                    $(".alarm-save").attr("value", data);
                    $(".alarm-save2").attr("value", data);
                },
                error: function () {
                    location.href = "alarm.html";
                }
            });

            $(".btn-add-alarm-detail").on("click",function(){
               $.ajax({
                url: "server/alarm.php",
                type: "POST",
                data: {
                    condition: "getId"
                },
                success: function (data) {
                    $(".alarm-save").attr("value", data);
                    $(".alarm-save2").attr("value", data);
                },
                error: function () {
                    location.href = "alarm.html";
                }
            });
            });

            $(".alarm-save").on("click", function () {
                var form_data = new FormData();
                form_data.append("condition", "save");
                form_data.append("alarm_id", $(".alarm-save").attr("value"));
                form_data.append("alarm_title", $(".alarm_title").val());
                form_data.append("alarm_loc", $(".alarm_loc").val());
               if($(".alarm_loc").val()==3){
                  form_data.append("alarm_param", $(".alarm_min").val());
                form_data.append("address", $(".address").val());

               }
               else if($(".alarm_loc").val()==2){
                  form_data.append("alarm_param", "");  
                   form_data.append("address", $(".alarm-rail").val());  
               } 
                else if($(".alarm_loc").val()==1){
                    form_data.append("alarm_param", $(".alarm_param").val());
                form_data.append("address", $(".address").val());  
                }
                form_data.append("gender", $(".gender").val());
                form_data.append("house_type", $(".house_type").val());
                form_data.append("type", $(".type").val());
                form_data.append("min_rent", $(".min-rent").val());
                form_data.append("max_rent", $(".max-rent").val());
                form_data.append("person", $(".person").val());
                form_data.append("park", $(".park").val());
                form_data.append("date", $(".date").val());
                form_data.append("date_condition", $(".date_condition").val());
                form_data.append("contact", $(".contact").val());
                form_data.append("cont", "1");

                $.ajax({
                    url: "server/alarm.php",
                    type: "POST",
                    processData: false, // file전송시 필수
                    contentType: false, // file전송시 필수
                    data: form_data,
                    success: function (data) {
                        if(data=="저장 성공!"){
                            $("#add-condition-confirm").modal("show");
                        }
                        else{
                            swal({
                              title: "저장실패",
                              text: "입력하지 않은 값이 있습니다.",
                              imageUrl: "images/naro_b_basic.png"
                            });
                        }
                    },
                    error: function () {
                        swal("에러 발생!", "잠시후 다시 시도해 주세요.", "error");
                    }
                });

            });
            
            $(".alarm-save2").on("click", function () {
                var form_data = new FormData();
                form_data.append("condition", "simplesave");
                form_data.append("alarm_id", $(".alarm-save2").attr("value"));
                form_data.append("address", $(".address2").val());
                form_data.append("gender", $("#gender2").val());
                form_data.append("type", $("#type2").val());
                form_data.append("cont", "1");
                if($(".address2").val()!='' && $("#gender2").val()!='' && $("#type2").val()!=''){
                    $.ajax({
                    url: "server/alarm.php",
                    type: "POST",
                    processData: false, // file전송시 필수
                    contentType: false, // file전송시 필수
                    data: form_data,
                    success: function (data) {
                        if(data=="저장 성공!"){
                            $("#add-condition-confirm").modal("show");
                        }
                        else{
                            swal({
                              title: "저장실패",
                              text: "입력하지 않은 값이 있습니다.",
                              imageUrl: "images/naro_b_basic.png"
                            });
                        }
                    },
                    error: function () {
                        swal("에러 발생!", "잠시후 다시 시도해 주세요.", "error");
                    }
                });
                }
                else{
                    swal({
                              title: "저장실패",
                              text: "입력하지 않은 값이 있습니다.",
                              imageUrl: "images/naro_b_basic.png"
                            });
                }
                

            });
            
            $(".alarm-save3").on("click", function () {
                var form_data = new FormData();
                form_data.append("condition", "simplesave");
                form_data.append("alarm_id", $(".alarm-save3").attr("value"));
                form_data.append("address", $(".address3").val());
                form_data.append("gender", $("#gender3").val());
                form_data.append("type", $("#type3").val());
                form_data.append("cont", "1");

                $.ajax({
                    url: "server/alarm.php",
                    type: "POST",
                    processData: false, // file전송시 필수
                    contentType: false, // file전송시 필수
                    data: form_data,
                    success: function (data) {
                        if(data=="저장 성공!"){
                            $("#add-condition-confirm").modal("show");
                        }
                        else{
                            swal({
                              title: "저장실패",
                              text: "입력하지 않은 값이 있습니다.",
                              imageUrl: "images/naro_b_basic.png"
                            });
                        }
                    },
                    error: function () {
                        swal("에러 발생!", "잠시후 다시 시도해 주세요.", "error");
                    }
                });

            });
        </script>

        <!-- add-condition-confirm modal -->
        <div class="modal fade apartment-modal" id="add-condition-confirm" style="top:10%;" data-keyboard="false" data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="javascript:closeModal();">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <div class="modal-title">
                            <div class="row">
                                <div class="alarm-confirm-container">
                                    <img src="images/alarm-detail.png" class="img-responsible img-rounded" width="50" height="50" />
                                    <p>[조건등록이 완료되었습니다.]</p>
                                    <p>입력하신 연락처로 알려드리겠습니다.</p>
                                </div>
                            </div>
                        </div>

                        <a href="javascript:closeModal();" class="facebook-button">
                            <i class="fa fa-pencil-square-o"></i>
                            <span>알람 조건 수정</span>
                        </a>
                        <script>
                            function closeModal() {
                                location.reload();
                            }
                        </script>

                        <a href="javascript:closeModal();" class="google-button margin-top-15">
                            <i class="fa fa-pencil-square-o"></i>
                            <span>연락처 수정</span>
                        </a>

                        <a href="javascript:closeModal();" class="facebook-button addMore margin-top-15" style="background-color:#23b300">
                            <i class="fa fa-pencil-square-o"></i>
                            <span>추가 등록</span>
                        </a>
                        <style>
                            .addMore:hover {
                                background-color: white !important;
                            }
                        </style>

                        <!--
                        <a href="javascript:addRegist();" class="button-primary button-shadow button-full" style="margin-top:15px;">
                            <span>추가 등록</span>
                            <div class="button-triangle"></div>
                            <div class="button-triangle2"></div>
                            <div class="button-icon"><i class="fa fa-plus-circle"></i></div>
                        </a>
-->
                        <script>
                            function addRegist() {
                                location.reload();
                            }
                        </script>

                        <a href="alarm.html" class="button-secondary button-shadow button-full" style="margin-top:15px;">
                            <span>창 닫기</span>
                            <div class="button-triangle"></div>
                            <div class="button-triangle2"></div>
                            <div class="button-icon"><i class="fa fa-arrow-right"></i></div>
                        </a>

                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>
        <!-- /.modal -->
        
        

        <!--로그인, 회원가입, 비밀번호 찾기-->
        <?include("config/user.html")?>
            <!--sweetalert2-->
            <link rel="stylesheet" type="text/css" href="css/sweetalert.css">
            <script src="js/sweetalert.min.js"></script>

            <!-- jQuery  -->
            <script type="text/javascript" src="js/jQuery/jquery.min.js"></script>
            <script type="text/javascript" src="js/jQuery/jquery-ui.min.js"></script>

            <!-- Bootstrap-->
            <script type="text/javascript" src="bootstrap/bootstrap.min.js"></script>

            <!-- Google Maps -->
            <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDfDCV5hXiPamCIT8_vwGXuzimLQ9MF76g&amp;sensor=false&amp;libraries=places"></script>

            <!-- plugins script -->
            <script type="text/javascript" src="js/plugins.js"></script>

            <!-- template scripts -->
            <script type="text/javascript" src="mail/validate.js"></script>
            <script type="text/javascript" src="js/apartment.js"></script>

            <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

    </body>

    </html>
